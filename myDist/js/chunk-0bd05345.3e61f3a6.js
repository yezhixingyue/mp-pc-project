(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0bd05345"],{4794:function(e,t,r){"use strict";r.r(t);var s=(r("a15b"),r("d81d"),r("ac1f"),r("5319"),r("1276"),r("96cf"),r("1da1")),o=r("5530"),a=r("2f62"),n={data:function(){var e=this;return{codeRules:{VertifyCode:[{validator:function(t,r,s){e.validateCheck(r,e.defineRules.VertifyCodeRules,s)&&s()},trigger:"blur"}]},pwdRules:{Password:[{validator:function(t,r,s){e.validateCheck(r,e.defineRules.Password,s)&&(""!==e.pwdForm.rePassword&&e.$refs.pwdForm.validateField("rePassword"),s())},trigger:"blur"}],rePassword:[{validator:function(t,r,s){e.validateCheck(r,e.defineRules.Password,s)&&(e.pwdForm.rePassword!==e.pwdForm.Password?s(new Error("两次密码输入不一致")):s())},trigger:"blur"}]},active:0,codeForm:{Mobile:"",VertifyCode:""},pwdForm:{Password:"",rePassword:""},codeTitle:"获取短信验证码",timer:null,canGetCode:!0,firstRes:null,defineRules:{Mobile:[{strategy:"isNotEmpty",errorMsg:"请输入手机号!"},{strategy:"shouldLength:11",errorMsg:"请输入11位手机号码"},{strategy:"isPhone",errorMsg:"手机号码格式不正确"}],Password:[{strategy:"isNotEmpty",errorMsg:"请输入密码!"},{strategy:"minLength:6",errorMsg:"密码最小长度为6位"},{strategy:"maxLength:16",errorMsg:"密码最大长度为16位"}],nameRules:[{strategy:"isNotEmpty",errorMsg:"请输入企业简称"}],VertifyCodeRules:[{strategy:"isNotEmpty",errorMsg:"请输入短信验证码"},{strategy:"shouldLength:6",errorMsg:"短信验证码长度为6位"}]}}},computed:Object(o.a)(Object(o.a)({},Object(a.e)("common",["customerInfo"])),{},{Mobile:{get:function(){return this.codeForm.Mobile},set:function(e){this.codeForm.Mobile=e.replace(/[^\d.]/g,"")}},VertifyCode:{get:function(){return this.codeForm.VertifyCode},set:function(e){this.codeForm.VertifyCode=e.replace(/[^\d.]/g,"")}}}),methods:{next:function(){var e=this;0===this.active&&this.$refs.codeForm.validate(function(){var t=Object(s.a)(regeneratorRuntime.mark((function t(r){var s,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=7;break}return s=e.codeForm.VertifyCode,o={VertifyCode:s},t.next=5,e.api.getCheckCode(o);case 5:1e3===(a=t.sent).data.Status&&(e.firstRes=a.data.Data,e.active+=1);case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),1===this.active&&this.$refs.pwdForm.validate(function(){var t=Object(s.a)(regeneratorRuntime.mark((function t(r){var s,a,n,i,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return s=e.pwdForm,a=s.Password,n=s.rePassword,i=n,c=Object(o.a)(Object(o.a)({},e.firstRes),{},{Password:a,RePassword:i}),t.next=6,e.api.getResetPassword(c);case 6:1e3===t.sent.data.Status&&(e.active+=1);case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getVertifyCode:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.canGetCode){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.api.getSmsCode(e.customerInfo.Mobile,2);case 4:1e3===t.sent.data.Status&&e.changeCodeTitleAtSecond();case 6:case"end":return t.stop()}}),t)})))()},changeCodeTitleAtSecond:function(){var e=this,t=60;this.canGetCode=!1,this.codeTitle="".concat(t,"秒后重新获取"),this.timer&&clearInterval(this.timer),this.timer=setInterval((function(){t-=1,e.codeTitle="".concat(t,"秒后重新获取"),0===t&&(e.codeTitle="重新获取验证码",clearInterval(e.timer),e.canGetCode=!0)}),1e3)},formatMobile:function(e){return e&&11===e.length?e.split("").map((function(e,t){return t>2&&t<7?"*":e})).join(""):""}}},i=(r("7741"),r("2877")),c={components:{ChangePhoneComp:Object(i.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"mp-pc-login-find-pass-comp-wrap"},[r("el-steps",{attrs:{active:e.active}},[r("el-step",{attrs:{title:"验证身份"}}),r("el-step",{attrs:{title:"修改手机号"}}),r("el-step",{attrs:{title:"完成"}})],1),r("div",{staticClass:"content"},[0===e.active&&e.customerInfo?r("el-form",{key:"find-pwd-form-0001",ref:"codeForm",attrs:{model:e.codeForm,"status-icon":"",rules:e.codeRules,"label-width":"100px"}},[r("div",{staticClass:"before-phone-wrap"},[r("span",{staticClass:"title"},[e._v("手机号码： ")]),r("span",[e._v(e._s(e.formatMobile(e.customerInfo.Mobile)))])]),r("el-form-item",{staticClass:"code-box",attrs:{prop:"VertifyCode",label:"短信验证码："}},[r("el-input",{attrs:{placeholder:"请输入短信验证码"},model:{value:e.VertifyCode,callback:function(t){e.VertifyCode="string"==typeof t?t.trim():t},expression:"VertifyCode"}}),r("span",{staticClass:"span-title-blue",class:e.canGetCode?"":"disabled",on:{click:e.getVertifyCode}},[e._v(e._s(e.codeTitle))])],1)],1):e._e(),1===e.active?r("el-form",{key:"find-pwd-form-0002",ref:"pwdForm",attrs:{model:e.pwdForm,"status-icon":"",rules:e.pwdRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"设置新密码：",prop:"Password"}},[r("el-input",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:e.pwdForm.Password,callback:function(t){e.$set(e.pwdForm,"Password","string"==typeof t?t.trim():t)},expression:"pwdForm.Password"}})],1),r("el-form-item",{attrs:{label:"确认新密码：",prop:"rePassword"}},[r("el-input",{attrs:{placeholder:"请再次输入密码",type:"password"},model:{value:e.pwdForm.rePassword,callback:function(t){e.$set(e.pwdForm,"rePassword","string"==typeof t?t.trim():t)},expression:"pwdForm.rePassword"}})],1)],1):e._e(),2===e.active?r("div",{staticClass:"res-wrap"},[r("i",{staticClass:"iconfont icon-wancheng"}),e._v("修改成功 ")]):e._e()],1),0===e.active||1===e.active?r("footer",[r("el-button",{attrs:{type:"primary"},on:{click:e.next}},[e._v("下一步")])],1):e._e()],1)}),[],!1,null,null,null).exports}},l=Object(i.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("span",{staticClass:"blue-v-line is-bold is-black"},[e._v("修改手机号")]),r("ChangePhoneComp")],1)}),[],!1,null,null,null);t.default=l.exports},7741:function(e,t,r){"use strict";var s=r("c6ae");r.n(s).a},c6ae:function(e,t,r){}}]);