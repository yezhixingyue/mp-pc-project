(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4e0a53b2"],{5596:function(t,e,n){"use strict";n.r(e);var r=n("5530"),a=n("2f62"),o=(n("99af"),n("7db0"),n("4160"),n("caad"),n("a15b"),n("b64b"),n("159b"),n("96cf"),n("1da1")),s=n("c117"),i={data:function(){return{multipleSelection:[],h:0}},computed:Object(r.a)(Object(r.a)(Object(r.a)({},Object(a.e)("shoppingCar",["shoppingDataList","shoppingDataNumber"])),Object(a.e)("common",["ExpressList"])),{},{checkedAll:{get:function(){return this.multipleSelection.length===this.shoppingDataNumber&&this.multipleSelection.length>0},set:function(t){t?this.$refs.multipleTable.toggleAllSelection():this.$refs.multipleTable.clearSelection()}},isIndeterminate:function(){return this.multipleSelection.length<this.shoppingDataNumber&&this.multipleSelection.length>0}}),methods:{getHeight:function(){return document.getElementsByTagName("body")[0].offsetHeight-280},setHeight:function(){var t=this.getHeight();this.h=t},getName:function(t){var e=t.ProductParams.Attributes,n=e.Name,r=e.SecondLevelName;return"".concat(r,"-").concat(n)},getSize:function(t){var e=t.ProductParams.PartList,n=[];return e[0].PartList[0].Attributes.SizeName?e[0].PartList[0].Attributes.SizeName:(e.forEach((function(t){var e=t.PartList[0].SizePropertyList,r="",a=[],o=[];e.forEach((function(t){a.push(t.ShowValue),o.push(t.ShowUnit)}));var s={};if(o.forEach((function(t){s[t]?s[t]+=1:s[t]=0})),1===Object.keys(s).length)r=a.join("×")+o[0];else{var i=[];a.forEach((function(t,e){var n=t+o[e];i.push(n)})),r=i.join("×")}var l=n.length;l>0&&n[l-1]===r||n.push(r)})),n.join("、"))},getNumber:function(t){var e=t.Attributes,n=t.ProductAmount,r=t.KindCount,a=e.Unit,o="";return r>1&&(o="".concat(r,"款")),"".concat(n).concat(a).concat(o)},getCraftFromItem:function(t,e){t&&t.length>0&&t.forEach((function(t){var n="",r=t.Attributes,a=t.PropertyList,o=r.NickName;n+=o,a.length>1?n+="".concat(a.length,"处"):1===a.length&&a[0].length>0&&a[0].forEach((function(t){var e=t.ShowValue;e&&(n+=" ".concat(e))})),e.push(n)}))},getCraft:function(t){var e=this,n=t.CraftList,r=t.PartList,a=[],o=n.First;return this.getCraftFromItem(o,a),r.length>0&&r.forEach((function(t){t.PartList.forEach((function(t){var n=t.CraftList.First;e.getCraftFromItem(n,a)}))})),a.join("，")},getExpress:function(t){var e=t.First,n=t.Second;if(1===e&&1===n)return"名片之家";if(0===this.ExpressList.length)return"";var r="",a=this.ExpressList.find((function(t){return t.Type===e}));if(a){r=a.Name;var o=a.List.find((function(t){return t.ID===n}));o&&(r+=" ".concat(o.Name))}return r},handleSelectionChange:function(t){this.multipleSelection=t},getStatus:function(t){if(!t.FileErrorMessage)return t.FileHaveUpload?{text:"文件已上传",warn:!1,success:!1}:{text:"文件未上传",warn:!0,success:!1};var e=!1,n=!1;return["删除失败"].includes(t.FileErrorMessage)&&(e=!0,n=!1),["订单已提交"].includes(t.FileErrorMessage)&&(e=!1,n=!0),{text:t.FileErrorMessage,warn:e,success:n}},onDetailClick:function(t){this.$store.commit("shoppingCar/setCurShoppingCarDetailData",t),this.$router.push("/shopping/detail")},handleSelectedSubmit:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.multipleSelection.length){e.next=3;break}return t.$message.error("请选择订单"),e.abrupt("return");case 3:return e.next=5,t.$store.dispatch("shoppingCar/getOrderPreCreateFromShoppingCar",t.multipleSelection);case 5:e.sent&&t.$router.push("/shopping/submit");case 7:case"end":return e.stop()}}),e)})))()},handleSingleSubmit:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$store.dispatch("shoppingCar/getOrderPreCreateFromShoppingCar",[t]);case 2:n.sent&&e.$router.push("/shopping/submit");case 4:case"end":return n.stop()}}),n)})))()},handleDel:function(t){var e=this;if(t||0!==this.multipleSelection.length){var n=t?"确定删除该订单吗":"确定删除选中订单吗",r="";if(t){if(!t.ProductParams||!t.ProductParams.Attributes)return;var a=t.ProductParams.Attributes,o=a.SecondLevelName,s=a.Name;if(!o||!s)return;r="订单产品：[ ".concat(o," - ").concat(s," ]")}else{if(!this.multipleSelection)return;r="[ 共有 ".concat(this.multipleSelection.length," 条订单被选中 ]")}this.messageBox.warnCancelBox({title:n,msg:r,successFunc:function(){var n=t?[t]:e.multipleSelection;e.$store.dispatch("shoppingCar/getQuotationRemove",n)}})}else this.$message.error("请选择订单")},handleClearList:function(){this.$store.commit("shoppingCar/clearShoppingDataList")}},mounted:function(){var t=this;this.$nextTick((function(){return t.setHeight()})),window.addEventListener("resize",this.setHeight)},beforeDestroy:function(){window.removeEventListener("resize",this.setHeight)},watch:{shoppingDataList:{handler:function(){var t=this;this.$nextTick((function(){if(!t.oBtn){var e=document.querySelector(".mp-pc-shopcar-page-table-comp-wrap .el-table__header .check-row");if(e){t.oBtn=e,e.click=null;var n=Object(s.a)((function(e){"TH"===e.target.nodeName&&(t.checkedAll?t.$refs.multipleTable.clearSelection():t.$refs.multipleTable.toggleAllSelection())}),10);e.addEventListener("click",n,!1)}}}))},immediate:!0}}},l=(n("6a3c"),n("2877")),c={components:{ShoppingCarTable:Object(l.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"mp-pc-shopcar-page-table-comp-wrap"},[n("el-table",{key:"mp-pc-shopcar-page-table-comp-wrap",ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.shoppingDataList,"tooltip-effect":"dark",stripe:"",border:""},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection","class-name":"check-row",width:"54"}}),n("el-table-column",{attrs:{label:"产品",width:"130","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.getName(e.row)))]}}])}),n("el-table-column",{attrs:{label:"尺寸",width:"70","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.getSize(e.row)))]}}])}),n("el-table-column",{attrs:{label:"数量",width:"78","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.getNumber(e.row.ProductParams)))]}}])}),n("el-table-column",{attrs:{label:"工艺",width:"70","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.getCraft(e.row.ProductParams)))]}}])}),n("el-table-column",{attrs:{label:"原价",width:"65","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.Funds.OriginalPrice)+"元")]}}])}),n("el-table-column",{attrs:{label:"优惠券","show-overflow-tooltip":"",width:"65"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.Funds.CouponAmount>0?"-"+e.row.Funds.CouponAmount:0)+"元")]}}])}),n("el-table-column",{attrs:{label:"成交价",width:"65","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.Funds.FinalPrice)+"元")]}}])}),n("el-table-column",{attrs:{label:"定金",width:"65","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.Funds.Deposit)+"元")]}}])}),n("el-table-column",{attrs:{prop:"Content",label:"文件内容","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{prop:"Address.Address.Consignee",label:"收货人",width:"60","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{prop:"Address.Address.Mobile",label:"收货人手机",width:"90","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"配送方式","show-overflow-tooltip":"",width:"78"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.getExpress(e.row.Address.Express)))]}}])}),n("el-table-column",{attrs:{label:"状态","show-overflow-tooltip":"",width:"75"},scopedSlots:t._u([{key:"default",fn:function(e){return n("span",{class:{"is-pink":t.getStatus(e.row).warn,"is-success":t.getStatus(e.row).success}},[t._v(t._s(t.getStatus(e.row).text))])}}])}),n("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return n("div",{staticClass:"menu-list"},[n("span",{staticClass:"span-title-blue",on:{click:function(n){return t.handleSingleSubmit(e.row)}}},[t._v("下单")]),n("span",{staticClass:"span-title-blue detail",on:{click:function(n){return t.onDetailClick(e.row)}}},[t._v("详情")]),n("span",{staticClass:"span-title-pink",on:{click:function(n){return t.handleDel(e.row)}}},[t._v("删除")])])}}])})],1),n("footer",{staticClass:"float is-font-14"},[n("div",{staticClass:"left"},[n("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},model:{value:t.checkedAll,callback:function(e){t.checkedAll=e},expression:"checkedAll"}},[t._v("全选")]),n("span",{staticClass:"gray"},[t._v("共检测出 "),n("i",{staticClass:"is-pink"},[t._v(t._s(t.shoppingDataNumber))]),t._v(" 个订单")])],1),n("div",{staticClass:"right"},[n("span",{staticClass:"span-title-blue",on:{click:t.handleClearList}},[t._v("清除已上传订单")]),n("span",{staticClass:"span-title-pink",on:{click:function(e){return t.handleDel(null)}}},[t._v("删除选中订单")]),n("el-button",{attrs:{type:"primary"},on:{click:t.handleSelectedSubmit}},[t._v("上传选中订单")])],1)])],1)}),[],!1,null,null,null).exports},computed:Object(r.a)({},Object(a.e)("shoppingCar",["shoppingDataNumber","shoppingDataList"])),mounted:function(){this.$store.dispatch("shoppingCar/getQuotationList"),this.$store.dispatch("common/getExpressList")}},u=(n("d50f"),Object(l.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("article",{staticClass:"mp-pc-shopping-car-page-wrap"},[t.shoppingDataList.length>0||t.shoppingDataNumber>0?r("section",[r("ShoppingCarTable")],1):r("div",{staticClass:"show-empty-bg"},[r("img",{attrs:{src:n("cfa4"),alt:""}}),r("p",{staticClass:"is-gray"},[t._v("当前购物车为空，快去下单吧...")])])])}),[],!1,null,null,null));e.default=u.exports},"6a3c":function(t,e,n){"use strict";var r=n("a93a");n.n(r).a},"9e09":function(t,e,n){},a93a:function(t,e,n){},c117:function(t,e,n){"use strict";function r(t,e){var n=Date.now();return function(){var r=Date.now(),a=e-(r-n),o=this;if(a<=0){for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];t.apply(o,i),n=Date.now()}}}n.d(e,"a",(function(){return r}))},cfa4:function(t,e,n){t.exports=n.p+"img/shopping-car-empty2.dc8e3ebb.png"},d50f:function(t,e,n){"use strict";var r=n("9e09");n.n(r).a}}]);