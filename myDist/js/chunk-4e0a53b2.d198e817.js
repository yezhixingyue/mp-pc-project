(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4e0a53b2"],{5596:function(t,e,n){"use strict";n.r(e);var a=n("5530"),o=n("2f62"),i=(n("99af"),n("7db0"),n("4160"),n("caad"),n("a15b"),n("b64b"),n("159b"),n("96cf"),n("1da1")),s=n("c117"),r={data:function(){return{multipleSelection:[],h:0,isFootFixed:!1}},computed:Object(a.a)(Object(a.a)(Object(a.a)({},Object(o.e)("shoppingCar",["shoppingDataList","shoppingDataNumber"])),Object(o.e)("common",["ExpressList"])),{},{checkedAll:{get:function(){return this.multipleSelection.length===this.shoppingDataNumber&&this.multipleSelection.length>0},set:function(t){t?this.$refs.multipleTable.toggleAllSelection():this.$refs.multipleTable.clearSelection()}},isIndeterminate:function(){return this.multipleSelection.length<this.shoppingDataNumber&&this.multipleSelection.length>0}}),methods:{getHeight:function(){return document.getElementsByTagName("body")[0].offsetHeight-280},setHeight:function(){var t=this.getHeight();this.h=t},getName:function(t){var e=t.ProductParams.Attributes,n=e.Name,a=e.SecondLevelName;return"".concat(a,"-").concat(n)},getSize:function(t){var e=t.ProductParams.PartList,n=[];return e[0].PartList[0].Attributes.SizeName?e[0].PartList[0].Attributes.SizeName:(e.forEach((function(t){var e=t.PartList[0].SizePropertyList,a="",o=[],i=[];e.forEach((function(t){o.push(t.ShowValue),i.push(t.ShowUnit)}));var s={};if(i.forEach((function(t){s[t]?s[t]+=1:s[t]=0})),1===Object.keys(s).length)a=o.join("×")+i[0];else{var r=[];o.forEach((function(t,e){var n=t+i[e];r.push(n)})),a=r.join("×")}var l=n.length;l>0&&n[l-1]===a||n.push(a)})),n.join("、"))},getNumber:function(t){var e=t.Attributes,n=t.ProductAmount,a=t.KindCount,o=e.Unit,i="";return a>1&&(i="".concat(a,"款")),"".concat(n).concat(o).concat(i)},getCraftFromItem:function(t,e){t&&t.length>0&&t.forEach((function(t){var n="",a=t.Attributes,o=t.PropertyList,i=a.NickName;n+=i,o.length>1?n+="".concat(o.length,"处"):1===o.length&&o[0].length>0&&o[0].forEach((function(t){var e=t.ShowValue;e&&(n+=" ".concat(e))})),e.push(n)}))},getCraft:function(t){var e=this,n=t.CraftList,a=t.PartList,o=[],i=n.First;return this.getCraftFromItem(i,o),a.length>0&&a.forEach((function(t){t.PartList.forEach((function(t){var n=t.CraftList.First;e.getCraftFromItem(n,o)}))})),o.join("，")},getExpress:function(t){var e=t.First,n=t.Second;if(1===e&&1===n)return"名片之家";if(0===this.ExpressList.length)return"";var a="",o=this.ExpressList.find((function(t){return t.Type===e}));if(o){a=o.Name;var i=o.List.find((function(t){return t.ID===n}));i&&(a+=" ".concat(i.Name))}return a},handleSelectionChange:function(t){this.multipleSelection=t},getStatus:function(t){if(!t.FileErrorMessage)return t.FileHaveUpload?{text:"文件已上传",warn:!1,success:!1}:{text:"文件未上传",warn:!0,success:!1};var e=!1,n=!1;return["删除失败"].includes(t.FileErrorMessage)&&(e=!0,n=!1),["订单已提交"].includes(t.FileErrorMessage)&&(e=!1,n=!0),{text:t.FileErrorMessage,warn:e,success:n}},onDetailClick:function(t){this.$store.commit("shoppingCar/setCurShoppingCarDetailData",t),this.$router.push("/shopping/detail")},handleSelectedSubmit:function(){var t=this;return Object(i.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.multipleSelection.length){e.next=3;break}return t.$message.error("请选择订单"),e.abrupt("return");case 3:return e.next=5,t.$store.dispatch("shoppingCar/getOrderPreCreateFromShoppingCar",t.multipleSelection);case 5:e.sent&&t.$router.push("/shopping/submit");case 7:case"end":return e.stop()}}),e)})))()},handleSingleSubmit:function(t){var e=this;return Object(i.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$store.dispatch("shoppingCar/getOrderPreCreateFromShoppingCar",[t]);case 2:n.sent&&e.$router.push("/shopping/submit");case 4:case"end":return n.stop()}}),n)})))()},handleDel:function(t){var e=this;if(t||0!==this.multipleSelection.length){var n=t?"确定删除该订单吗":"确定删除选中订单吗",a="";if(t){if(!t.ProductParams||!t.ProductParams.Attributes)return;var o=t.ProductParams.Attributes,i=o.SecondLevelName,s=o.Name;if(!i||!s)return;a="订单产品：[ ".concat(i," - ").concat(s," ]")}else{if(!this.multipleSelection)return;a="[ 共有 ".concat(this.multipleSelection.length," 条订单被选中 ]")}this.messageBox.warnCancelBox({title:n,msg:a,successFunc:function(){var n=t?[t]:e.multipleSelection;e.$store.dispatch("shoppingCar/getQuotationRemove",n)}})}else this.$message.error("请选择订单")},handleClearList:function(){this.$store.commit("shoppingCar/clearShoppingDataList")},handleScroll:function(t){if(t){var e=t.scrollTop,n=t.scrollHeight-t.offsetHeight;this.isFootFixed=n-140-e>0}}},mounted:function(){var t=this;this.oApp=document.getElementById("app");var e=Object(s.a)(this.handleScroll,30);this.oApp&&(this.oApp.onscroll=function(){return e(t.oApp)}),this.$nextTick((function(){t.handleScroll(t.oApp)}))},beforeDestroy:function(){this.oApp.onscroll=null},watch:{shoppingDataList:{handler:function(){var t=this;this.$nextTick((function(){if(!t.oBtn){var e=document.querySelector(".mp-pc-shopcar-page-table-comp-wrap .el-table__header .check-row");if(e){t.oBtn=e,e.click=null;var n=Object(s.b)((function(e){"TH"===e.target.nodeName&&(t.checkedAll?t.$refs.multipleTable.clearSelection():t.$refs.multipleTable.toggleAllSelection())}),10);e.addEventListener("click",n,!1)}}}))},immediate:!0}}},l=(n("6a3c"),n("2877")),c={components:{ShoppingCarTable:Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"mp-pc-shopcar-page-table-comp-wrap"},[n("div",{staticClass:"table-wrap"},[n("el-table",{key:"mp-pc-shopcar-page-table-comp-wrap",ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.shoppingDataList,"tooltip-effect":"dark",stripe:"",border:""},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection","class-name":"check-row",width:"54"}}),n("el-table-column",{attrs:{label:"产品",width:"130","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.getName(e.row)))]}}])}),n("el-table-column",{attrs:{label:"尺寸",width:"70","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.getSize(e.row)))]}}])}),n("el-table-column",{attrs:{label:"数量",width:"78","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.getNumber(e.row.ProductParams)))]}}])}),n("el-table-column",{attrs:{label:"工艺",width:"70","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.getCraft(e.row.ProductParams)))]}}])}),n("el-table-column",{attrs:{label:"原价",width:"65","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.Funds.OriginalPrice)+"元")]}}])}),n("el-table-column",{attrs:{label:"优惠券","show-overflow-tooltip":"",width:"65"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.Funds.CouponAmount>0?"-"+e.row.Funds.CouponAmount:0)+"元")]}}])}),n("el-table-column",{attrs:{label:"成交价",width:"65","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.Funds.FinalPrice)+"元")]}}])}),n("el-table-column",{attrs:{label:"定金",width:"65","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.Funds.Deposit)+"元")]}}])}),n("el-table-column",{attrs:{prop:"Content",label:"文件内容","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{prop:"Address.Address.Consignee",label:"收货人",width:"60","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{prop:"Address.Address.Mobile",label:"收货人手机",width:"90","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"配送方式","show-overflow-tooltip":"",width:"78"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.getExpress(e.row.Address.Express)))]}}])}),n("el-table-column",{attrs:{label:"状态","show-overflow-tooltip":"",width:"75"},scopedSlots:t._u([{key:"default",fn:function(e){return n("span",{class:{"is-pink":t.getStatus(e.row).warn,"is-success":t.getStatus(e.row).success}},[t._v(t._s(t.getStatus(e.row).text))])}}])}),n("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return n("div",{staticClass:"menu-list"},[n("span",{staticClass:"span-title-blue",on:{click:function(n){return t.handleSingleSubmit(e.row)}}},[t._v("下单")]),n("span",{staticClass:"span-title-blue detail",on:{click:function(n){return t.onDetailClick(e.row)}}},[t._v("详情")]),n("span",{staticClass:"span-title-pink",on:{click:function(n){return t.handleDel(e.row)}}},[t._v("删除")])])}}])})],1)],1),n("footer",{staticClass:"is-font-14"},[n("div",{staticClass:"float"},[n("div",{staticClass:"left"},[n("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},model:{value:t.checkedAll,callback:function(e){t.checkedAll=e},expression:"checkedAll"}},[t._v("全选")]),n("span",{staticClass:"gray"},[t._v("共检测出 "),n("i",{staticClass:"is-pink"},[t._v(t._s(t.shoppingDataNumber))]),t._v(" 个订单")])],1),n("div",{staticClass:"right"},[n("span",{staticClass:"span-title-pink",on:{click:function(e){return t.handleDel(null)}}},[t._v("删除选中订单")]),n("el-button",{attrs:{type:"primary"},on:{click:t.handleSelectedSubmit}},[t._v("上传选中订单")])],1)])]),n("transition",{attrs:{name:"el-fade-in-linear"}},[n("footer",{directives:[{name:"show",rawName:"v-show",value:t.isFootFixed,expression:"isFootFixed"}],staticClass:"is-font-14 floating"},[n("div",{staticClass:"float"},[n("div",{staticClass:"left"},[n("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},model:{value:t.checkedAll,callback:function(e){t.checkedAll=e},expression:"checkedAll"}},[t._v("全选")]),n("span",{staticClass:"gray"},[t._v("共检测出 "),n("i",{staticClass:"is-pink"},[t._v(t._s(t.shoppingDataNumber))]),t._v(" 个订单")])],1),n("div",{staticClass:"right"},[n("span",{staticClass:"span-title-pink",on:{click:function(e){return t.handleDel(null)}}},[t._v("删除选中订单")]),n("el-button",{attrs:{type:"primary"},on:{click:t.handleSelectedSubmit}},[t._v("上传选中订单")])],1)])])])],1)}),[],!1,null,null,null).exports},computed:Object(a.a)({},Object(o.e)("shoppingCar",["shoppingDataNumber","shoppingDataList"])),mounted:function(){this.$store.dispatch("shoppingCar/getQuotationList"),this.$store.dispatch("common/getExpressList")}},u=(n("d50f"),Object(l.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("article",{staticClass:"mp-pc-shopping-car-page-wrap"},[t.shoppingDataList.length>0||t.shoppingDataNumber>0?a("section",[a("ShoppingCarTable")],1):a("div",{staticClass:"show-empty-bg"},[a("img",{attrs:{src:n("cfa4"),alt:""}}),a("p",{staticClass:"is-gray"},[t._v("当前购物车为空，快去下单吧...")])])])}),[],!1,null,null,null));e.default=u.exports},"6a3c":function(t,e,n){"use strict";var a=n("a93a");n.n(a).a},"9e09":function(t,e,n){},a93a:function(t,e,n){},c117:function(t,e,n){"use strict";function a(t,e,n){var a;return function(){for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];var r=this;if(a&&clearTimeout(a),n){var l=!a;a=setTimeout((function(){a=null}),e),l&&t.apply(r,i)}else a=setTimeout((function(){t.apply(r,i)}),e)}}function o(t,e){var n=null,a=Date.now();return function(){var o=Date.now(),i=e-(o-a),s=this;if(n&&(clearTimeout(n),n=null),i<=0){for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];t.apply(s,l),a=Date.now()}else n=setTimeout(t,i)}}n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o}))},cfa4:function(t,e,n){t.exports=n.p+"img/shopping-car-empty2.dc8e3ebb.png"},d50f:function(t,e,n){"use strict";var a=n("9e09");n.n(a).a}}]);