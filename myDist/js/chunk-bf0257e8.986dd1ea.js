(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-bf0257e8"],{"1a92":function(t,e,n){"use strict";var i=n("81d6");n.n(i).a},"1c7f":function(t,e,n){"use strict";var i=n("dde7");n.n(i).a},"81d6":function(t,e,n){},"8dcf":function(t,e,n){"use strict";n.r(e);var i=(n("7db0"),n("d81d"),n("d3b7"),n("ac1f"),n("3ca3"),n("5319"),n("ddb0"),n("2909")),a=(n("96cf"),n("1da1")),r=n("5530"),s={model:{prop:"value",event:"change"},props:{title:{type:String,default:"企业简称"},value:{},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{}},computed:{inpVal:{get:function(){return this.value},set:function(t){this.$emit("change",t)}}}},o=(n("1a92"),n("2877")),u=Object(o.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mp-pc-common-comps-input-common-comp-wrap"},[n("span",[t.required?n("i",{staticClass:"is-pink"},[t._v("*")]):t._e(),t._v(" "+t._s(t.title)+"：")]),n("el-input",{attrs:{disabled:t.disabled,placeholder:t.placeholder},model:{value:t.inpVal,callback:function(e){t.inpVal="string"==typeof e?e.trim():e},expression:"inpVal"}})],1)}),[],!1,null,null,null).exports,l=n("2f62"),c={components:{InputComp:u},computed:Object(r.a)(Object(r.a)({},Object(l.e)("common",["customerInfo"])),{},{imgSrc:function(){return this.AuthenInfo4Submit.AuthenInfo.LicensePath},srcList:function(){return[this.imgSrc]},AllowEdit:function(){return this.AuthenInfo4Submit.AllowEdit},QQ:{get:function(){return this.AuthenInfo4Submit.QQ},set:function(t){this.AuthenInfo4Submit.QQ=t.replace(/[^\d]/g,"")}},TaxID:{get:function(){return this.AuthenInfo4Submit.AuthenInfo.TaxID},set:function(t){this.AuthenInfo4Submit.AuthenInfo.TaxID=t.replace(/[^\w]/g,"")}}}),data:function(){return{RegionalList:[],CityList:[],CountyList:[],hasUploadedImg:!1,AuthenInfo4Submit:{AuthenInfo:{CompanyName:"",TaxID:"",SellArea:{RegionalID:"",RegionalName:"",CityID:"",CityName:"",CountyID:"",CountyName:""},DetailAddress:"",LicensePath:""},CustomerName:"",AllowEdit:!0,QQ:""},firstClickTime:"",secondClickTime:"",timer:null,simpNameRules:[{strategy:"isNotEmpty",errorMsg:"请输入企业简称"},{strategy:"maxLength:20",errorMsg:"企业简称长度不能超过20个字"},{strategy:"hasNotSpace",errorMsg:"企业简称中不能有空格"},{strategy:"hasNotRung",errorMsg:"企业简称中不能有横杠"}],companyRules:[{strategy:"isNotEmpty",errorMsg:"请输入企业全称"},{strategy:"hasNotSpace",errorMsg:"企业全称中不能有空格"},{strategy:"hasNotRung",errorMsg:"企业全称中不能有横杠"},{strategy:"maxLength:40",errorMsg:"企业全称长度最多不能超过40个字"}],detailRules:[{strategy:"isNotEmpty",errorMsg:"请输入详细地址信息"},{strategy:"maxLength:60",errorMsg:"详细地址长度不能超过60字"}],RegionalRules:[{strategy:"isNotEmpty",errorMsg:"请选择省份"},{strategy:"isNotZero",errorMsg:"请选择省份"}],CityRules:[{strategy:"isNotEmpty",errorMsg:"请选择城市"},{strategy:"isNotZero",errorMsg:"请选择城市"}],CountyRules:[{strategy:"isNotEmpty",errorMsg:"请选择县/区"},{strategy:"isNotZero",errorMsg:"请选择县/区"}],TaxIDRules:[{strategy:"hasNotSpace",errorMsg:"纳税人识别号中不能有空格"}]}},methods:{handleRegionalChange:function(t){var e=this;return Object(a.a)(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.RegionalList.find((function(e){return e.ID===t})),e.AuthenInfo4Submit.AuthenInfo.SellArea.RegionalName=i.Name,e.AuthenInfo4Submit.AuthenInfo.SellArea.CityID="",e.AuthenInfo4Submit.AuthenInfo.SellArea.CityName="",e.AuthenInfo4Submit.AuthenInfo.SellArea.CountyID="",e.AuthenInfo4Submit.AuthenInfo.SellArea.CountyName="",e.CityList=[],e.CountyList=[],0!==e.CityList.length&&e.CityList[0].ParentID===t){n.next=13;break}return n.next=11,e.api.getAddressIDList(t);case 11:1e3===(a=n.sent).data.Status&&(e.CityList=a.data.Data);case 13:case"end":return n.stop()}}),n)})))()},handleCityChange:function(t){var e=this;return Object(a.a)(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.CityList.find((function(e){return e.ID===t})),e.AuthenInfo4Submit.AuthenInfo.SellArea.CityName=i.Name,e.AuthenInfo4Submit.AuthenInfo.SellArea.CountyID="",e.AuthenInfo4Submit.AuthenInfo.SellArea.CountyName="",e.CountyList=[],0!==e.CountyList.length&&e.CountyList[0].ParentID===t){n.next=10;break}return n.next=8,e.api.getAddressIDList(t);case 8:1e3===(a=n.sent).data.Status&&(e.CountyList=a.data.Data);case 10:case"end":return n.stop()}}),n)})))()},handleCountyChange:function(t){var e=this.CountyList.find((function(e){return e.ID===t}));this.AuthenInfo4Submit.AuthenInfo.SellArea.CountyName=e.Name},onChange:function(t){var e=this,n=t.target.files[0];if(n)if("image/jpeg"===n.type||"image/png"===n.type||"image/bmp"===n.type){var i=new FileReader;i.readAsDataURL(n),i.onload=function(t){var i=t.currentTarget.result,r=new Image;r.src=i,r.onload=Object(a.a)(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((i={width:r.naturalWidth,height:r.naturalHeight}).width<900||i.height<1280)||!(i.width<1280||i.height<900)){t.next=4;break}return e.messageBox.warnSingleError({title:"图片尺寸太小",msg:"请上传大于等于900×1280像素的图片"}),t.abrupt("return");case 4:return t.next=6,e.api.uploadImage(n);case 6:1e3===(a=t.sent).data.Status&&(e.AuthenInfo4Submit.AuthenInfo.LicensePath=a.data.Data.Url);case 8:case"end":return t.stop()}}),t)})))}}else this.messageBox.warnSingleError({title:"图片格式错误",msg:"请上传 jpg/png/bmp 格式图片"})},handleSingleClick:function(){var t=this,e=document.querySelector("div.upload-img.el-image > img");if(e){var n=document.querySelector("div.img-mask");n.style.cursor="progress",this.timer=setTimeout((function(){e.click(),t.timer=null,n.style.cursor="default"}),300)}},onImgClick:function(){if(!this.hasUploadedImg&&this.AllowEdit)if(this.firstClickTime=this.secondClickTime,this.secondClickTime=Date.now(),this.firstClickTime)if(this.secondClickTime-this.firstClickTime>=300)this.handleSingleClick();else{clearTimeout(this.timer),this.timer=null;var t=document.querySelector("div.img-mask"),e=document.querySelector("input.upload");t.style.cursor="default",e.click()}else this.handleSingleClick()},reportError:function(t){this.messageBox.warnSingleError({title:"校验错误",msg:t})},checkValue:function(){var t=this.AuthenInfo4Submit.AuthenInfo,e=t.SellArea,n=t.DetailAddress,i=t.TaxID;if(!e)return this.reportError("请选择地址!"),!1;var a=e.RegionalID,r=e.CityID,s=e.CountyID,o=this.AuthenInfo4Submit,u=o.CustomerName,l=o.QQ;if(!this.validateCheck(u,this.simpNameRules,this.reportError))return!1;if(!this.validateCheck(a,this.RegionalRules,this.reportError))return!1;if(!this.validateCheck(r,this.CityRules,this.reportError))return!1;if(!this.validateCheck(s,this.CountyRules,this.reportError))return!1;if(!this.validateCheck(n,this.detailRules,this.reportError))return!1;if(i){var c=i.length;if(15!==c&&17!==c&&18!==c&&20!==c)return this.reportError("纳税人识别号长度不正确,应为15、17、18、20位数字或字母"),!1;if(!this.validateCheck(i,this.TaxIDRules,this.reportError))return!1}if(l){var h=l.length;if(h<5)return this.reportError("QQ号长度最少为5位"),!1;if(h>13)return this.reportError("QQ号长度不应超过13位"),!1}return!0},handleSubmit:function(){var t=this;return Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.checkValue()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.api.getCustomerApplyAuthentication(t.AuthenInfo4Submit);case 4:1e3===e.sent.data.Status&&t.messageBox.successSingle({title:"修改成功",successFunc:function(){t.AuthenInfo4Submit.AllowEdit=!1}});case 6:case"end":return e.stop()}}),e)})))()}},watch:{customerInfo:{handler:function(t){var e=this;return Object(a.a)(regeneratorRuntime.mark((function n(){var a,s,o,u,l,c,h,m,f,d,p,g,I,A;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:if(a=t.CustomerName,s=t.AuthenInfo,o=t.AllowEdit,u=t.QQ,s){n.next=5;break}return n.abrupt("return");case 5:if(l=s.CompanyName,c=s.DetailAddress,h=s.LicensePath,m=s.TaxID,f=s.SellArea,e.AuthenInfo4Submit.CustomerName=a,e.AuthenInfo4Submit.QQ=u,e.AuthenInfo4Submit.AllowEdit=o,e.AuthenInfo4Submit.AuthenInfo.TaxID=m,e.AuthenInfo4Submit.AuthenInfo.CompanyName=l,e.AuthenInfo4Submit.AuthenInfo.DetailAddress=c,e.AuthenInfo4Submit.AuthenInfo.LicensePath=h,h&&(e.hasUploadedImg=!0),f&&(e.AuthenInfo4Submit.AuthenInfo.SellArea=Object(r.a)({},f)),!f){n.next=26;break}return d=f.RegionalID,p=f.CityID,n.next=19,Promise.all([e.api.getAddressIDList(-1),e.api.getAddressIDList(d),e.api.getAddressIDList(p)]);case 19:g=n.sent,I=g.map((function(t){return 1e3===t.data.Status?t.data.Data:[]})),e.RegionalList=Object(i.a)(I[0]),e.CityList=Object(i.a)(I[1]),e.CountyList=Object(i.a)(I[2]),n.next=30;break;case 26:return n.next=28,e.api.getAddressIDList(-1);case 28:1e3===(A=n.sent).data.Status&&(e.RegionalList=A.data.Data);case 30:case"end":return n.stop()}}),n)})))()},immediate:!0}}},h=(n("1c7f"),Object(o.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"mp-pc-my-setting-account-page-wrap"},[n("div",{staticClass:"basic-info"},[n("span",{staticClass:"blue-v-line is-bold is-black"},[t._v("基本信息")]),n("span",{staticClass:"is-font-12"},[t._v("（ 每月可修改一次 ）")]),n("div",[n("InputComp",{attrs:{disabled:!t.AllowEdit,title:"企业简称",required:""},model:{value:t.AuthenInfo4Submit.CustomerName,callback:function(e){t.$set(t.AuthenInfo4Submit,"CustomerName",e)},expression:"AuthenInfo4Submit.CustomerName"}}),n("InputComp",{attrs:{disabled:!t.AllowEdit,title:"企业全称",placeholder:"须与营业执照上的名称一致"},model:{value:t.AuthenInfo4Submit.AuthenInfo.CompanyName,callback:function(e){t.$set(t.AuthenInfo4Submit.AuthenInfo,"CompanyName",e)},expression:"AuthenInfo4Submit.AuthenInfo.CompanyName"}})],1),n("div",{staticClass:"second"},[n("InputComp",{attrs:{disabled:!t.AllowEdit,title:"纳税人识别号",placeholder:"营业执照上的纳税人识别号"},model:{value:t.TaxID,callback:function(e){t.TaxID=e},expression:"TaxID"}}),n("InputComp",{attrs:{disabled:!t.AllowEdit,title:"QQ"},model:{value:t.QQ,callback:function(e){t.QQ=e},expression:"QQ"}})],1),n("div",{staticClass:"address-wrap"},[n("div",{staticClass:"add-1"},[t._m(0),n("el-select",{attrs:{disabled:!t.AllowEdit},on:{change:t.handleRegionalChange},model:{value:t.AuthenInfo4Submit.AuthenInfo.SellArea.RegionalID,callback:function(e){t.$set(t.AuthenInfo4Submit.AuthenInfo.SellArea,"RegionalID",e)},expression:"AuthenInfo4Submit.AuthenInfo.SellArea.RegionalID"}},t._l(t.RegionalList,(function(t){return n("el-option",{key:t.ID,attrs:{label:t.Name,value:t.ID}})})),1),n("el-select",{attrs:{disabled:0===t.CityList.length||!t.AllowEdit},on:{change:t.handleCityChange},model:{value:t.AuthenInfo4Submit.AuthenInfo.SellArea.CityID,callback:function(e){t.$set(t.AuthenInfo4Submit.AuthenInfo.SellArea,"CityID",e)},expression:"AuthenInfo4Submit.AuthenInfo.SellArea.CityID"}},t._l(t.CityList,(function(t){return n("el-option",{key:t.ID,attrs:{label:t.Name,value:t.ID}})})),1),n("el-select",{attrs:{disabled:0===t.CountyList.length||!t.AllowEdit},on:{change:t.handleCountyChange},model:{value:t.AuthenInfo4Submit.AuthenInfo.SellArea.CountyID,callback:function(e){t.$set(t.AuthenInfo4Submit.AuthenInfo.SellArea,"CountyID",e)},expression:"AuthenInfo4Submit.AuthenInfo.SellArea.CountyID"}},t._l(t.CountyList,(function(t){return n("el-option",{key:t.ID,attrs:{label:t.Name,value:t.ID}})})),1)],1),n("div",{staticClass:"add-2"},[n("el-input",{attrs:{disabled:!t.AllowEdit,placeholder:"在此输入详细地址"},model:{value:t.AuthenInfo4Submit.AuthenInfo.DetailAddress,callback:function(e){t.$set(t.AuthenInfo4Submit.AuthenInfo,"DetailAddress","string"==typeof e?e.trim():e)},expression:"AuthenInfo4Submit.AuthenInfo.DetailAddress"}})],1)])]),n("div",{staticClass:"img-info"},[n("p",{staticClass:"blue-v-line is-bold is-black"},[t._v("营业执照照片")]),n("div",{staticClass:"img-box"},[n("div",{staticClass:"pic is-font-18",class:t.AuthenInfo4Submit.AuthenInfo.LicensePath?"":"show-bg"},[n("input",{staticClass:"upload",attrs:{type:"file",accept:".png,.jpeg,.jpg,.bmp"},on:{change:t.onChange}}),t.AuthenInfo4Submit.AuthenInfo.LicensePath?n("el-image",{staticClass:"upload-img",attrs:{fit:"cover",src:t.imgSrc,"preview-src-list":t.srcList}}):[n("span",[t._v("双击添加照片")]),t._m(1)],n("div",{staticClass:"img-mask",on:{click:t.onImgClick}})],2),!t.hasUploadedImg&&t.AllowEdit?n("div",{staticClass:"text gray"},[n("p",{staticClass:"is-bold"},[t._v("操作说明：")]),n("p",{staticClass:"is-font-12"},[t._v("双击可更换照片；单击查看照片，鼠标滚轮滚动可放大/ 缩小图片；拖拽可移动图片。")])]):t._e()])]),n("footer",[t.customerInfo&&t.customerInfo.RefuseTips&&!t.AllowEdit?n("span",{staticClass:"is-cyan"},[t._v(t._s(t.customerInfo.RefuseTips))]):t._e(),n("el-button",{attrs:{type:"primary",disabled:!t.AllowEdit},on:{click:t.handleSubmit}},[t._v("保存")])],1)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"title"},[n("i",{staticClass:"is-pink"},[t._v("*")]),t._v(" 经营地址：")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"remark"},[n("p",{staticClass:"remoark-text1"},[t._v("照片支持 .png, .jpg,.bmp 格式；")]),n("p",[t._v("宽度和长度比率为5:7")])])}],!1,null,null,null));e.default=h.exports},dde7:function(t,e,n){}}]);