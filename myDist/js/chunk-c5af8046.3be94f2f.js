(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-c5af8046"],{3873:function(e,t,a){"use strict";var r=a("b2e1");a.n(r).a},7156:function(e,t,a){var r=a("861d"),s=a("d2bb");e.exports=function(e,t,a){var n,o;return s&&"function"==typeof(n=t.constructor)&&n!==a&&r(o=n.prototype)&&o!==a.prototype&&s(e,o),e}},"7c68":function(e,t,a){},8272:function(e,t,a){},"89c6":function(e,t,a){"use strict";var r=a("8272");a.n(r).a},a9e3:function(e,t,a){"use strict";var r=a("83ab"),s=a("da84"),n=a("94ca"),o=a("6eeb"),i=a("5135"),c=a("c6b6"),l=a("7156"),u=a("c04e"),p=a("d039"),d=a("7c73"),f=a("241c").f,m=a("06cf").f,h=a("9bf2").f,D=a("58a8").trim,g="Number",v=s[g],C=v.prototype,_=c(d(C))==g,O=function(e){var t,a,r,s,n,o,i,c,l=u(e,!1);if("string"==typeof l&&l.length>2)if(43===(t=(l=D(l)).charCodeAt(0))||45===t){if(88===(a=l.charCodeAt(2))||120===a)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:r=2,s=49;break;case 79:case 111:r=8,s=55;break;default:return+l}for(o=(n=l.slice(2)).length,i=0;i<o;i++)if((c=n.charCodeAt(i))<48||c>s)return NaN;return parseInt(n,r)}return+l};if(n(g,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var b,k=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof k&&(_?p((function(){C.valueOf.call(a)})):c(a)!=g)?l(new v(O(t)),a,k):O(t)},T=r?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;T.length>w;w++)i(v,b=T[w])&&!i(k,b)&&h(k,b,m(v,b));k.prototype=C,C.constructor=k,o(s,g,k)}},b2e1:function(e,t,a){},bd86:function(e,t,a){},c117:function(e,t,a){"use strict";function r(e,t,a){var r;return function(){for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];var i=this;if(r&&clearTimeout(r),a){var c=!r;r=setTimeout((function(){r=null}),t),c&&e.apply(i,n)}else r=setTimeout((function(){e.apply(i,n)}),t)}}function s(e,t){var a=null,r=Date.now();return function(){var s=Date.now(),n=t-(s-r),o=this;if(a&&(clearTimeout(a),a=null),n<=0){for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];e.apply(o,c),r=Date.now()}else a=setTimeout(e,n)}}a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s}))},e7d2:function(e,t,a){"use strict";a.r(t);var r=(a("99af"),a("b680"),a("ac1f"),a("5319"),a("96cf"),a("1da1")),s=a("5530"),n=a("2f62"),o=a("3eea"),i=(a("4de4"),a("a9e3"),{props:{OrderID:{type:Number,default:0}},data:function(){return{progressData:null}},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.OrderID){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.api.getOrderProgress(e.OrderID);case 4:a=t.sent,e.$emit("setProgressDataCompleted",!0),1e3===a.data.Status&&(e.progressData=a.data.Data.filter((function(e){return 0!==e.FinishPercent||e.ShowFocus})).reverse());case 7:case"end":return t.stop()}}),t)})))()}}),c=(a("ecc5"),a("2877")),l=Object(c.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"mp-pc-order-detail-page-progress-comp-wrap"},[a("header",{staticClass:"section-title"},[e._v("订单跟踪")]),a("ul",{staticClass:"content mp-scroll-wrap"},e._l(e.progressData,(function(t,r){return a("li",{key:t.OperateTime+r,class:t.ShowFocus?"active":""},[a("div",{staticClass:"point-box"},[a("span",{staticClass:"point-item"}),r<e.progressData.length-1?a("span",{staticClass:"line"}):e._e()]),a("span",{staticClass:"date"},[e._v(e._s(e._f("format2MiddleLangTypeDate")(t.OperateTime)))]),a("el-tooltip",{attrs:{"popper-class":"table-item",content:t.Description,placement:"top-start"}},[a("span",{staticClass:"progress-text"},[e._v(e._s(t.Description))])]),a("el-progress",{attrs:{percentage:t.FinishPercent}})],1)})),0)])}),[],!1,null,null,null).exports,u=(a("4160"),a("159b"),a("2909")),p={props:{OrderID:{type:Number,default:0},Unit:{type:String,default:""},Express:{type:String,default:""}},data:function(){return{packageListData:null}},computed:{totalUnPaidAmount:function(){if(!this.packageListData||0===this.packageListData.length)return 0;var e=0;return this.packageListData.forEach((function(t){t.UnPaidAmount&&(e+=t.UnPaidAmount)})),+e.toFixed(2)}},methods:{objectSpanMethod:function(e){var t=e.rowIndex;if(5===e.columnIndex)return 0===t?{rowspan:this.packageListData.length,colspan:1}:{rowspan:0,colspan:0}}},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.OrderID){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.api.getOrderPackageList(e.OrderID);case 4:a=t.sent,e.$emit("setPackDataCompleted",!0),1e3===a.data.Status&&(r=Object(u.a)(a.data.Data),e.packageListData=r);case 7:case"end":return t.stop()}}),t)})))()}},d=(a("ffcd"),Object(c.a)(p,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"mp-pc-order-detail-page-package-list-comp-wrap"},[a("header",{staticClass:"section-title"},[e._v("包裹列表")]),a("div",{staticClass:"content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.packageListData,border:"","span-method":e.objectSpanMethod}},[a("el-table-column",{attrs:{prop:"ID",label:"运单号",width:"180"}}),a("el-table-column",{attrs:{label:"数量",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return a("span",{staticClass:"gray"},[e._v(e._s(t.row.ProductAmount+e.Unit))])}}])}),a("el-table-column",{attrs:{label:"配送",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return a("span",{staticClass:"gray"},[e._v(e._s(t.row&&e.Express))])}}])}),a("el-table-column",{attrs:{label:"配送进度",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatStatus4PackageList")(t.row.Status)))]}}])}),a("el-table-column",{attrs:{label:"配送代收",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(+(t.row.UnPaidAmount&&t.row.UnPaidAmount.toFixed(2)))+"元")]}}])}),a("el-table-column",{attrs:{label:"",width:"239","class-name":"total-col"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("配送共代收："),a("i",{staticClass:"is-font-16 is-pink"},[e._v(e._s(t.row&&e.totalUnPaidAmount)+"元")])])]}}])})],1)],1)])}),[],!1,null,null,null)).exports,f=a("4e76"),m=a("c117"),h={data:function(){return{elesTopInfo:{oHeaderTop:0,oProgressTop:0,oPackageTop:0,oDetailTop:0},activeText:"header",distance:130}},methods:{handleScroll:function(e){if(e){var t=e.scrollTop+this.distance;t>this.elesTopInfo.oPackageTop?this.activeText="detail":t>this.elesTopInfo.oProgressTop?this.activeText="package":t>this.elesTopInfo.oHeaderTop?this.activeText="progress":this.activeText="header"}},handleJump:function(e){var t=this;if(this.activeText!==e){var a=0;switch(e){case"header":a=this.elesTopInfo.oHeaderTop-145;break;case"progress":a=this.elesTopInfo.oProgressTop-145;break;case"package":a=this.elesTopInfo.oPackageTop-145;break;case"detail":a=this.elesTopInfo.oDetailTop-145}this.activeText=e,this.utils.animateScroll(this.oApp.scrollTop,a,(function(e){t.oApp.scrollTop=e}))}},getElementPosition:function(e){for(var t=e,a=0,r=0;null!==t.offsetParent;)a+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent;return{x:a,y:r}},getElesInfo:function(){var e=document.querySelector(".mp-pc-order-detail-page-header-wrap"),t=document.querySelector(".mp-pc-order-detail-page-progress-comp-wrap"),a=document.querySelector(".mp-pc-order-detail-page-package-list-comp-wrap"),r=document.querySelector(".mp-pc-order-list-page-order-detail-page-wrap .mp-pc-order-detail-common-comp-wrap"),s=this.getElementPosition(e).y,n=this.getElementPosition(t).y,o=this.getElementPosition(a).y,i=this.getElementPosition(r).y;this.elesTopInfo={oHeaderTop:s,oProgressTop:n,oPackageTop:o,oDetailTop:i}}},mounted:function(){var e=this;this.oApp=document.getElementById("app");var t=Object(m.a)(this.handleScroll,30);this.oApp&&(this.oApp.onscroll=function(){return t(e.oApp)}),this.$nextTick((function(){window.onresize=Object(m.a)(e.getElesInfo,30),e.getElesInfo()}))},beforeDestroy:function(){this.oApp.onscroll=null,window.onresize=null}},D=(a("3873"),Object(c.a)(h,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("aside",{staticClass:"mp-pc-order-detail-page-aside-comp-wrap"},[a("p",[a("span",{class:"header"===e.activeText?"active":"",on:{click:function(t){return e.handleJump("header")}}},[e._v("订单概括")])]),a("p",[a("span",{class:"progress"===e.activeText?"active":"",on:{click:function(t){return e.handleJump("progress")}}},[e._v("订单跟踪")])]),a("p",[a("span",{class:"package"===e.activeText?"active":"",on:{click:function(t){return e.handleJump("package")}}},[e._v("包裹列表")])]),a("p",[a("span",{class:"detail"===e.activeText?"active":"",on:{click:function(t){return e.handleJump("detail")}}},[e._v("产品详情")])])])}),[],!1,null,null,null)).exports,g={data:function(){return{progressDataCompleted:!1,packDataCompleted:!1,detailDataCompleted:!1}},components:{OrderDetailHeader:o.a,OrderProgress:l,OrderPackageList:d,OrderDetailCommonComp:f.a,AsideIndexComp:D},computed:Object(s.a)(Object(s.a)({},Object(n.e)("order",["curOrderDetailData"])),{},{info4OrderSummary:function(){var e=this.curOrderDetailData,t=e.OutPlate,a=e.Content,r=e.OrderID,s=e.CreateTime,n=e.Express,o=e.Status,i=e.Package.Address.Address,c=i.AddressDetail,l=i.ExpressArea,u=i.Consignee,p=i.Mobile,d=l.RegionalName,f=l.CountyName,m=l.CityName;return{OutPlate:t,Address:"".concat(d).concat(m).concat(f).concat(c),Content:a,OrderID:r,CreateTime:s,Express:n,Consignee:u,Mobile:p,Status:o}},promotePrice:function(){return+(this.curOrderDetailData.Funds.DiscountPrice-this.curOrderDetailData.Funds.CouponAmount).toFixed(2)}}),methods:{onReturnClick:function(){this.$store.commit("order/setShouldGetNewListData",!1),this.$router.replace("/order/list")},handleSubmit:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("shoppingCar/getOrderPreCreateFromShoppingCar",[e.curOrderDetailData]);case 2:t.sent&&e.$router.push("/shopping/submit");case 4:case"end":return t.stop()}}),t)})))()},handleGetDataSuccess:function(){this.progressDataCompleted&&this.packDataCompleted&&this.detailDataCompleted&&this.$refs.AsideIndexComp.getElesInfo()},setProgressDataCompleted:function(e){this.progressDataCompleted=e,e&&this.handleGetDataSuccess()},setPackDataCompleted:function(e){this.packDataCompleted=e,e&&this.handleGetDataSuccess()},setDetailDataCompleted:function(e){this.detailDataCompleted=e,e&&this.handleGetDataSuccess()}},mounted:function(){this.curOrderDetailData||this.$router.replace("/order/list")}},v=(a("89c6"),Object(c.a)(g,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.curOrderDetailData?a("section",{staticClass:"mp-pc-order-list-page-order-detail-page-wrap"},[a("header",{staticClass:"gray"},[a("span",{on:{click:e.onReturnClick}},[a("i",{staticClass:"el-icon-arrow-left is-font-24 is-cancel"}),e._v(" 返回我的订单列表")])]),a("ul",{staticClass:"content"},[a("li",[a("OrderDetailHeader",{attrs:{info4OrderSummary:e.info4OrderSummary}})],1),a("li",[a("OrderProgress",{attrs:{OrderID:this.curOrderDetailData.OrderID},on:{setProgressDataCompleted:e.setProgressDataCompleted}})],1),a("li",[a("OrderPackageList",{attrs:{OrderID:this.curOrderDetailData.OrderID,Unit:this.curOrderDetailData.Unit,Express:this.curOrderDetailData.Express},on:{setPackDataCompleted:e.setPackDataCompleted}})],1),a("li",{staticClass:"last-item"},[a("OrderDetailCommonComp",{attrs:{orderDetail:e.curOrderDetailData},on:{setDetailDataCompleted:e.setDetailDataCompleted}},[a("div",{staticClass:"price-wrap"},[e.curOrderDetailData?a("div",{staticClass:"price-box"},[a("div",{staticClass:"price-left"},[a("p",[e._v("原价：")]),a("p",[e._v("优惠券：")]),a("p",[e._v("活动：")]),a("p",{staticClass:"final-price"},[e._v("成交价"),a("i",{staticClass:"is-font-12 gray"}),e._v("：")]),a("p",[e._v("已付：")]),a("p",[e._v("未付：")]),a("p",[e._v("退款：")])]),a("div",{staticClass:"price-right"},[a("p",[e._v("¥ "+e._s(e.curOrderDetailData.Funds.OriginalPrice))]),a("p",{class:e.curOrderDetailData.Funds.CouponAmount&&e.curOrderDetailData.Funds.CouponAmount>0?"is-pink":""},[[e.curOrderDetailData.Funds.CouponAmount&&e.curOrderDetailData.Funds.CouponAmount>0?a("i",[e._v("-")]):e._e(),e._v(" ¥ "+e._s(e.curOrderDetailData.Funds.CouponAmount?e.curOrderDetailData.Funds.CouponAmount:0)+" ")]],2),a("p",{class:e.promotePrice>0?"is-pink":""},[[e.promotePrice&&e.promotePrice>0?a("i",[e._v("-")]):e._e(),e._v("¥ "+e._s(e.promotePrice?e.promotePrice:0)+" ")]],2),a("p",{staticClass:"final-price is-pink"},[e._v("¥ "),a("i",{staticClass:"is-font-24 is-bold"},[e._v(e._s(e.curOrderDetailData.Funds.FinalPrice))])]),a("p",[e._v("¥ "+e._s(e.curOrderDetailData.Funds.HavePaid))]),a("p",[e._v("¥ "+e._s(e.curOrderDetailData.Funds.Unpaid))]),a("p",[e._v("¥ "+e._s(e.curOrderDetailData.Funds.Refund))])])]):e._e()])])],1)]),a("AsideIndexComp",{ref:"AsideIndexComp"})],1):e._e()}),[],!1,null,null,null));t.default=v.exports},ecc5:function(e,t,a){"use strict";var r=a("bd86");a.n(r).a},ffcd:function(e,t,a){"use strict";var r=a("7c68");a.n(r).a}}]);