(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-fb5322b6"],{2160:function(t,e,a){"use strict";var n=a("2290");a.n(n).a},2290:function(t,e,a){},4512:function(t,e,a){"use strict";a.r(e);var n=(a("7db0"),a("96cf"),a("1da1")),s={components:{Count:a("8aa1").a},data:function(){return{couponList:[],couponCount:0,Page:1,PageSize:12}},methods:{getCouponList:function(t,e){var a=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t&&(a.Page=t),e&&(a.PageSize=e),n.next=4,a.api.getCouponReceiveableList(a.Page,a.PageSize);case 4:1e3===(s=n.sent).data.Status&&(a.couponList=s.data.Data,a.couponCount=s.data.DataNumber);case 6:case"end":return n.stop()}}),n)})))()},setSsionStorage:function(){var t={couponList:this.couponList,couponCount:this.couponCount};sessionStorage.setItem("couponCenterData",JSON.stringify(t))},handlePageChange:function(t){this.getCouponList(t)},receiveCoupon:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.api.getCouponReceive(t);case 2:1e3===a.sent.data.Status&&(n=t.CouponID,e.couponList.find((function(t){return t.CouponID===n})).Receivable=!1,e.messageBox.successSingle({title:"领取成功",successFunc:function(){e.getCouponList()}}));case 4:case"end":return a.stop()}}),a)})))()},handleCouponReceive:function(t){var e=t.CouponID,a=t.Receivable,n=t.Data;e&&a&&n.TotalNumber!==n.GenerateNumber&&this.receiveCoupon({CouponID:e})}},mounted:function(){this.getCouponList()}},o=(a("2160"),a("2877")),i=Object(o.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"mp-pc-my-setting-pages-coupon-center-page-wrap"},[a("header",[a("span",{staticClass:"blue-v-line is-bold is-black"},[t._v("领券中心")]),a("span",{staticClass:"is-font-12"},[t._v("（ 共检测出 "),a("i",{staticClass:"is-pink is-font-16"},[t._v(t._s(t.couponCount))]),t._v(" 张优惠券 ）")])]),a("ul",{staticClass:"content"},t._l(t.couponList,(function(e,n){return a("li",{key:e.CouponID+n,staticClass:"coupon-item",class:e.Receivable?e.Data.TotalNumber>e.Data.GenerateNumber?"receivable":"hasnone":"disabled"},[a("div",{staticClass:"left-content"},[a("div",{staticClass:"amount-box"},[a("p",{staticClass:"f center"},[a("span",{staticClass:"is-font-18"},[t._v("¥ ")]),a("span",{staticClass:"is-font-28 is-bold"},[t._v(t._s(e.Data.Amount))])]),a("p",{staticClass:"center is-font-12"},[t._v("满"),a("i",{staticClass:"is-font-14"},[t._v(t._s(e.Data.MinPayAmount))]),t._v("元可用")])]),a("div",{staticClass:"info"},[a("p",{staticClass:"f"},[a("span",{staticClass:"is-gray"},[t._v("限产品：")]),a("el-tooltip",{attrs:{"popper-class":"table-item",enterable:!1,content:e.ProductString,placement:"top-start"}},[a("span",[t._v(t._s(e.ProductString))])])],1),a("p",{staticClass:"is-gray"},[a("span",[t._v(t._s(t._f("format2MiddleLangTypeDate")(e.ValidStartTime)))]),a("i",[t._v(" - ")]),a("span",[t._v(t._s(t._f("format2MiddleLangTypeDate")(e.ValidEndTime)))])])])]),a("div",{staticClass:"right-botton",on:{click:function(a){return t.handleCouponReceive(e)}}},[t._v(" "+t._s(e.Receivable?e.Data.TotalNumber>e.Data.GenerateNumber?"立即领取":"已抢光":"已领取")+" ")]),a("div",{staticClass:"receivable-box"})])})),0),a("footer",[a("Count",{attrs:{watchPage:t.Page,handlePageChange:t.handlePageChange,count:t.couponCount,pageSize:t.PageSize}})],1)])}),[],!1,null,null,null);e.default=i.exports}}]);