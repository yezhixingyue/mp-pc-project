(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-feb7dd42"],{"07ac":function(t,e,a){var i=a("23e7"),s=a("6f53").values;i({target:"Object",stat:!0},{values:function(t){return s(t)}})},"0fac":function(t,e,a){},"26cf":function(t,e,a){"use strict";var i=a("d9a6");a.n(i).a},"3c9a":function(t,e,a){},4474:function(t,e,a){"use strict";var i=a("89aa");a.n(i).a},"45ce":function(t,e,a){},5377:function(t,e,a){var i=a("83ab"),s=a("9bf2"),n=a("ad6d"),o=a("9f7f").UNSUPPORTED_Y;i&&("g"!=/./g.flags||o)&&s.f(RegExp.prototype,"flags",{configurable:!0,get:n})},"6a69":function(t,e,a){"use strict";var i=a("8ec5");a.n(i).a},"6f53":function(t,e,a){var i=a("83ab"),s=a("df75"),n=a("fc6a"),o=a("d1e7").f,r=function(t){return function(e){for(var a,r=n(e),c=s(r),l=c.length,u=0,d=[];l>u;)a=c[u++],i&&!o.call(r,a)||d.push(t?[a,r[a]]:r[a]);return d}};t.exports={entries:r(!0),values:r(!1)}},7502:function(t,e,a){},"751c":function(t,e,a){},"7fff":function(t,e,a){"use strict";var i=a("7502");a.n(i).a},"85fa":function(t,e,a){"use strict";var i=a("3c9a");a.n(i).a},"89aa":function(t,e,a){},"8ec5":function(t,e,a){},b826:function(t,e,a){"use strict";var i=a("0fac");a.n(i).a},bf11:function(t,e,a){"use strict";var i=a("e3df");a.n(i).a},c6b4:function(t,e,a){"use strict";var i=a("751c");a.n(i).a},c73f:function(t,e,a){"use strict";var i=a("45ce");a.n(i).a},d9a6:function(t,e,a){},dfd8:function(t,e,a){"use strict";a.r(e);var i=(a("ac1f"),a("5319"),a("5530")),s=a("2f62"),n=(a("4160"),a("b64b"),a("07ac"),a("159b"),function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{ref:"moveDiv",staticClass:"mp-table-drag-cell",style:t.widthStyle,on:{mousedown:t.onMousedown}},[t._v(" "+t._s(t.title)+" ")])}),o=(a("a9e3"),a("5377"),{props:{width:{type:Number,default:0},onWidthChange:{type:Function,default:null},title:{type:String,default:""}},computed:{widthStyle:function(){return"width: ".concat(this.width,"px")}},data:function(){return{flags:!1,oDIv:void 0}},methods:{onMousedown:function(t){(this.oDIv||this.$refs.moveDiv)&&(this.oDIv=this.$refs.moveDiv,t.offsetX>this.oDIv.offsetWidth-15&&(this.flags=!0,this.oDIv.oldX=t.x,this.oDIv.oldWidth=this.oDIv.offsetWidth,this.oDIv.style.cursor="col-resize"))},onMousemove:function(t){(this.oDIv||this.$refs.moveDiv)&&(void 0===this.oDIv&&(this.oDIv=this.$refs.moveDiv),t.offsetX>this.oDIv.offsetWidth-15?this.oDIv.style.cursor="col-resize":this.oDIv.style.cursor="default",this.flags&&(this.oDIv.style.cursor="default",this.oDIv.oldWidth+(t.x-this.oDIv.oldX)>30&&(this.oDIv.width=this.oDIv.oldWidth+(t.x-this.oDIv.oldX),this.onWidthChange&&this.onWidthChange(this.oDIv.width)),this.oDIv.style.cursor="col-resize"))},onMouseup:function(){(this.oDIv||this.$refs.moveDiv)&&(void 0===this.oDIv&&(this.oDIv=this.$refs.moveDiv),this.flags=!1,this.oDIv.style.cursor="default")}},mounted:function(){document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup)}}),r=(a("7fff"),a("2877")),c={components:{Header:Object(r.a)(o,n,[],!1,null,null,null).exports},props:{titleList:{type:Array,default:function(){return[]}},widthObj:{type:Object,default:function(){return{}}},onWidthChange:{type:Function,default:null},isScrollStyle:{type:Boolean,default:!0}},computed:{minWidth:function(){var t=0;return Object.values(this.widthObj).forEach((function(e){t+=e})),"minWidth: ".concat(t-8,"px")},widthKeyList:function(){return this.widthObj?Object.keys(this.widthObj):[]},widthValueList:function(){return this.widthObj?Object.values(this.widthObj):[]}},mounted:function(){if(this.titleList.length!==Object.keys(this.widthObj).length)throw new Error("the length of titleList is not equal to the count of widthObj's props")}},l=(a("6a69"),Object(r.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mp-retractable-display-comp-wrap",class:t.isScrollStyle?"mp-scroll-wrap":""},[a("header",t._l(t.titleList,(function(e,i){return a("Header",{key:e+"-"+i,attrs:{onWidthChange:function(e){return t.onWidthChange(e,t.widthKeyList[i])},width:t.widthValueList[i],title:e}})})),1),a("main",{class:t.isScrollStyle?"mp-scroll-wrap":"",style:t.minWidth},[t._t("default")],2)])}),[],!1,null,null,null)).exports,u=(a("99af"),a("d81d"),{functional:!0,render:function(t,e){var a=e.slots,i=e.props;return t("transition-group",{attrs:{name:"mp-group-collapse",tag:i.tag},class:i.className},[a().default])}}),d=(a("b826"),Object(r.a)(u,undefined,undefined,!1,null,null,null)).exports,h={props:{widthObj:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}},isDisabled:{type:Boolean,default:!1},CustomerNo:{type:String}},components:{TransitionGroupCollapse:d},computed:Object(i.a)(Object(i.a)({},Object(s.e)("Quotation",["obj2GetProductPrice","selectedCoupon","curFileContent"])),{},{wStyles:function(){return Object.values(this.widthObj).map((function(t){return"width: ".concat(t,"px")}))}}),data:function(){return{isActive:!0}},methods:{handleCollapse:function(){this.isActive=!this.isActive},getProductName:function(t){var e=t.FirstLevelName,a=t.SecondLevelName,i=t.ProductName;return"".concat(e,"-").concat(a,"-").concat(i)},getProductCount:function(t){var e=t.ProductAmount,a=t.Unit,i=t.KindCount;return"".concat(e).concat(a).concat(i,"款")},getAddress:function(t){var e=t.AddressDetail,a=t.Consignee,i=t.Mobile,s=t.ExpressArea,n=s.RegionalName,o=s.CityName,r=s.CountyName;return"".concat(n).concat(o).concat(r).concat(e," (").concat(a," ").concat(i,")")}}},f={components:{ItemListComp:(a("85fa"),Object(r.a)(h,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mp-pc-pre-create-order-list-item-wrap"},[a("div",{staticClass:"product-item-header"},[a("div",{staticClass:"product-item-header-left"},[a("span",{staticClass:"product-item-header-amount-box gray is-font-14"},[t._v("产品金额："),a("i",{staticClass:"is-pink"},[t._v(t._s(t.data.OrderList[0].FinalPrice)+"元")])]),a("span",{staticClass:"freight-box"},[a("i",{staticClass:"gray"},[t._v("运费：")]),t._v(t._s(t.data.Freight)+"元")]),a("span",[a("i",{staticClass:"gray"},[t._v("配送地址：")]),t._v(t._s(t.getAddress(t.data.Address.Address)))])]),a("div",{staticClass:"product-item-header-right",on:{click:t.handleCollapse}},[a("div",{class:t.isActive?"active":""})])]),a("TransitionGroupCollapse",{staticClass:"has-transition",attrs:{tag:"ul"}},[a("li",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],key:"product-item-content-1",staticClass:"product-item-content has-transition"},[a("div",{staticClass:"is-twelve",style:t.wStyles[0]},[t._v(t._s(t.getProductName(t.data.OrderList[0])))]),a("div",{style:t.wStyles[1]},[t._v(t._s(t.getProductCount(t.obj2GetProductPrice.ProductParams)))]),a("div",{style:t.wStyles[2]},[t._v(t._s(t.data.OrderList[0].OriginalPrice)+"元")]),a("div",{style:t.wStyles[3]},[t._v(t._s(t.selectedCoupon?t.selectedCoupon.Amount:0)+"元")]),a("div",{style:t.wStyles[4]},[t._v(t._s(t.data.OrderList[0].FinalPrice)+"元")]),t._v(" "),a("div",{style:t.wStyles[5]},[t._v(t._s(t.data.OrderList[0].DepositAmount)+"元")]),t._v(" "),a("div",{staticClass:"is-font-12 gray",style:t.wStyles[6]},[t._v(t._s(t.curFileContent))])])])],1)}),[],!1,null,null,null)).exports,RetractableDisplayComp:l},data:function(){return{widthObj:{w1:270,w2:105,w3:105,w4:105,w5:105,w6:105,w7:402},titleList:["产品","数量","原价","优惠券","成交价","订金","文件内容"],curSelectedList:[],unPayTableData:[]}},computed:Object(i.a)({},Object(s.e)("Quotation",["PreCreateData"])),methods:{onWidthChange:function(t,e){this.widthObj[e]=t}}},p=(a("26cf"),Object(r.a)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("RetractableDisplayComp",{staticClass:"mp-pc-pre-create-order-list-wrap",attrs:{isScrollStyle:!1,widthObj:t.widthObj,onWidthChange:t.onWidthChange,titleList:t.titleList}},[t.PreCreateData?t._l(t.PreCreateData.PackageList,(function(e){return a("ItemListComp",{key:e.ID,attrs:{data:e,widthObj:t.widthObj}})})):a("div",{staticClass:"no-data-show is-gray"},[t._v("暂无数据")])],2)}),[],!1,null,null,null)).exports,v=a("59245"),m=(a("b680"),a("96cf"),a("1da1")),y={props:{title:{type:String,default:"正在加载中，请稍候....."}}},C={components:{LoadingMiniSpinner:(a("c6b4"),Object(r.a)(y,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"spinner-loading-mini-wrap"},[a("div",{staticClass:"el-loading-spinner"},[a("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[a("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})]),a("span",[t._v(t._s(t.title))])])])}),[],!1,null,null,null)).exports}},g=(a("c73f"),Object(r.a)(C,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mp-common-loading-wrap"},[e("LoadingMiniSpinner",{staticClass:"loading-box"})],1)}),[],!1,null,null,null)).exports,P={props:{needClear:{default:!0,type:Boolean}},components:{LoadingComp:g},data:function(){return{dialogVisible:!1,showImg:!1,timer:null,count:0}},computed:Object(i.a)(Object(i.a)({},Object(s.e)("Quotation",["isShow2PayDialog","curPayInfo2Code"])),{},{imgSrc:function(){return this.curPayInfo2Code&&this.curPayInfo2Code.PayWay&&this.curPayInfo2Code.PayWay.AllinPay?this.curPayInfo2Code.PayWay.AllinPay:""},listener4GetPayStatus:function(){return this.showImg&&this.isShow2PayDialog}}),methods:Object(i.a)(Object(i.a)(Object(i.a)({},Object(s.b)("Quotation",["getPayResult"])),Object(s.d)("Quotation",["setIsShow2PayDialog","setCurPayInfo2Code","setPaySuccessOrderDataStatus"])),{},{handleClose:function(){this.needClear&&(this.showImg=!1),this.needClear&&this.setCurPayInfo2Code(null),this.setIsShow2PayDialog(!1),clearTimeout(this.timer),this.timer=null},onLoad:function(){this.showImg=!0},onError:function(t){"error"===t.type&&this.isShow2PayDialog&&this.messageBox.failSingleError({msg:"[ 获取不到二维码，请检查网络或稍后再试 ]",title:"图片获取失败"})},handleSuccessPay:function(){this.setPaySuccessOrderDataStatus(),this.handleClose()},getPayStatus:function(){var t=this;return Object(m.a)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isShow2PayDialog){e.next=2;break}return e.abrupt("return");case 2:return a=!1,e.next=5,t.getPayResult((function(t){"True"===t&&(a=!0)}));case 5:a?t.messageBox.successSingle({title:"付款成功",successFunc:function(){return t.handleSuccessPay()}}):t.timer=setTimeout((function(){t.getPayStatus()}),2e3);case 6:case"end":return e.stop()}}),e)})))()},numToFixed:function(t,e){return t||0===t?t.toFixed(e):""}}),watch:{listener4GetPayStatus:function(t){t&&this.getPayStatus()}},mounted:function(){this.setCurPayInfo2Code(null)}},_=(a("bf11"),Object(r.a)(P,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:t.isShow2PayDialog,width:"550px","custom-class":"dialog-to-pay-box",center:"","before-close":t.handleClose},on:{"update:visible":function(e){t.isShow2PayDialog=e}}},[t.curPayInfo2Code?a("section",[a("header",[a("div",{staticClass:"img-box"},[a("img",{directives:[{name:"show",rawName:"v-show",value:t.showImg,expression:"showImg"}],attrs:{src:t.imgSrc,alt:""},on:{error:t.onError,load:t.onLoad}}),t.showImg?t._e():a("div",{staticClass:"payImg-loading-box"},[a("i",{staticClass:"el-icon-loading"}),a("i",[t._v("正在加载中")])])]),a("p"),a("p",{staticClass:"gray"},[t._v("[ 请使用微信/支付宝扫一扫，扫描二维码支付 ]")])]),a("footer",{staticClass:"mp-pay-price-wrap"},[a("div",{staticClass:"left"},[a("p",[a("span",[t._v("扫码支付:")])]),a("p",[a("span",[t._v("已扣余额:")])]),a("p",[a("span",[t._v("货到付款:")])]),a("p",[a("span",[t._v("订单总金额:")])])]),t.curPayInfo2Code?a("div",{staticClass:"right"},[a("p",[a("span",{staticClass:"should-pay is-pink"},[a("i",[t._v("￥")]),t._v(" "+t._s(t.numToFixed(t.curPayInfo2Code.Amount,2))+"元 ")])]),a("p",[a("span",[a("i",[t._v("￥")]),t._v(" "+t._s(t.numToFixed(t.curPayInfo2Code.BalanceAmount,2))+"元 ")])]),a("p",[a("span",[a("i",[t._v("￥")]),t._v(" "+t._s(t.numToFixed(t.curPayInfo2Code.PayOnDelivery,2))+"元 ")])]),a("p",[a("span",[a("i",[t._v("￥")]),t._v(" "+t._s(t.numToFixed(t.curPayInfo2Code.TotalAmount,2))+"元 ")])])]):t._e()])]):a("LoadingComp"),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){return t.handleClose()}}},[t._v("关闭")])],1)],1)}),[],!1,null,null,null)).exports,b={components:{Table4UnPayList:p,UploadComp4BreakPoint:v.a,Dialog2Pay:_},computed:Object(i.a)(Object(i.a)({},Object(s.e)("Quotation",["orderFile4PreCreateData","PreCreateData","selectedCoupon","curPayInfo2Code","curPayInfo2Code"])),{},{payNumOnline:function(){return this.isFullPayout?this.PreCreateData.FullPayout:this.PreCreateData.MinimumCost},PayOnDelivery:function(){return this.isFullPayout?0:this.PreCreateData.PayOnDelivery},checked:{get:function(){return this.PreCreateData.MinimumCost===this.PreCreateData.FullPayout||this.isFullPayout},set:function(t){this.isFullPayout=t}},data2Listener:function(){return!this.orderFile4PreCreateData||!this.PreCreateData}}),data:function(){return{isFullPayout:!1}},methods:{onReturnClick:function(){this.$router.replace("/placeOrder"),this.$store.commit("Quotation/setIsFullPayoutDisabled",!1)},handleSubmit:function(){this.curPayInfo2Code?this.$store.commit("Quotation/setIsShow2PayDialog",!0):this.$refs.UploadComp4BreakPoint.upLoadSingleFile(this.orderFile4PreCreateData)},subMitPlaceOrder:function(t){var e=this,a=t.compiledName;this.$store.commit("Quotation/setIsShow2PayDialog",!0);var i={FilePath:a,PayInFull:this.checked};this.$store.dispatch("Quotation/placeOrderFromPreCreate",i).catch((function(){var t=arguments.length<=0?void 0:arguments[0];e.messageBox.handleLoadingError({title:"下单失败",error:t,successFunc:function(){return e.$store.commit("Quotation/setIsShow2PayDialog",!1)}})}))}},watch:{data2Listener:function(t){t&&this.$router.replace("/placeOrder")}},mounted:function(){this.data2Listener&&this.$router.replace("/placeOrder")}},w=(a("4474"),Object(r.a)(b,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"mp-pc-order-pre-create-page-comp-wrap"},[a("header",{staticClass:"gray"},[a("span",{on:{click:t.onReturnClick}},[a("i",{staticClass:"el-icon-arrow-left is-font-24 is-cancel"}),t._v(" 返回下单")])]),a("div",{staticClass:"main"},[a("Table4UnPayList")],1),t.PreCreateData?a("footer",[a("p",[t._m(0),a("span",[t._v(" （产品总额："),a("i",[t._v("¥"+t._s(t.PreCreateData.ProductPrice))]),t._v("， 总运费："),a("i",[t._v("¥"+t._s(t.PreCreateData.Freight))]),t._v("， 优惠券："),a("i",[t._v("¥"+t._s(t.selectedCoupon?t.selectedCoupon.Amount:0))]),t._v(" ）")])]),a("div",{staticClass:"price-wrap"},[t.PreCreateData?a("div",{staticClass:"price-box"},[a("div",{staticClass:"price-left"},[a("p",[t._v("在线支付：")]),a("p",{staticClass:"gray"},[t._v("货到款付：")]),t.PreCreateData.MinimumCost!==t.PreCreateData.FullPayout?a("p",{staticClass:"gray"},[t._v("支付方式：")]):t._e(),a("p",{staticClass:"final-price gray"},[t._v("当前可用余额：")])]),a("div",{staticClass:"price-right"},[a("p",{staticClass:"is-pink"},[t._v("¥ "),a("i",{staticClass:"is-font-20 is-bold"},[t._v(t._s(t._f("numToFixed2")(t.payNumOnline)))])]),a("p",{staticClass:"is-pink"},[t._v(t._s(t._f("numToFixed2")(t.PayOnDelivery)))]),t.PreCreateData.MinimumCost!==t.PreCreateData.FullPayout?a("p",[a("el-checkbox",{attrs:{disabled:!!t.curPayInfo2Code},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("在线支付全款")])],1):t._e(),a("p",[t._v("¥"+t._s(t._f("numToFixed2")(t.PreCreateData.FundBalance)))])])]):t._e()]),a("div",{staticClass:"btn-wrap"},[a("UploadComp4BreakPoint",{ref:"UploadComp4BreakPoint",attrs:{title:"",isUploadRightNow:"",onlyShow:"",successFunc:t.subMitPlaceOrder}}),a("el-button",{attrs:{type:"danger"},on:{click:t.handleSubmit}},[t._v("提交订单")])],1),a("Dialog2Pay",{attrs:{needClear:!1}})],1):t._e()])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t._v("总共 "),a("i",{staticClass:"is-pink"},[t._v("1")]),t._v("个订单 ")])}],!1,null,null,null));e.default=w.exports},e3df:function(t,e,a){}}]);